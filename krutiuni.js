var kruti_array = new Array("Ã±","Q+Z","sas","aa",")Z","ZZ","â€˜","â€™","â€œ","â€","Ã¥",  "Æ’",  "â€ž",   "â€¦",   "â€ ",   "â€¡",   "Ë†",   "â€°",   "Å ",   "â€¹", "Â¶+",   "d+", "[+k","[+", "x+",  "T+",  "t+", "M+", "<+", "Q+", ";+", "j+", "u+","Ã™k", "Ã™", "Ã¤", "â€“", "â€”","Ã©","â„¢","=kk","f=k",  "Ã ",   "Ã¡",    "Ã¢",   "Ã£",   "Âºz",  "Âº",   "Ã­", "{k", "{", "=",  "Â«", "NÃ®",   "VÃ®",    "BÃ®",   "MÃ®",   "<Ã®", "|", "K", "}","J",   "VÂª",   "MÂª",  "<ÂªÂª",  "NÂª",   "Ã˜",  "Ã", "nzZ",  "Ã¦", "Ã§", "Ã", "xz", "#", ":", "vâ€š","vks",  "vkS",  "vk",    "v",  "bÂ±", "Ãƒ",  "bZ",  "b",  "m",  "Ã…",  ",s",  ",",   "_","Ã´",  "d", "Dk", "D", "[k", "[", "x","Xk", "X", "Ã„", "?k", "?",   "Â³", "pkS",  "p", "Pk", "P",  "N",  "t", "Tk", "T",  ">", "Ã·", "Â¥","Ãª",  "Ã«",   "V",  "B",   "Ã¬",   "Ã¯", "M+", "<+", "M",  "<", ".k", ".", "r",  "Rk", "R",   "Fk", "F",  ")", "n", "/k", "Ã¨k",  "/", "Ã‹", "Ã¨", "u", "Uk", "U",   "i",  "Ik", "I",   "Q",    "Â¶",  "c", "Ck",  "C",  "Hk",  "H", "e", "Ek",  "E", ";",  "Â¸",   "j",    "y", "Yk",  "Y",  "G",  "o", "Ok", "O", "'k", "'",   "\"k",  "\"",  "l", "Lk",  "L",   "g",  "Ãˆ", "z", "ÃŒ", "Ã", "ÃŽ",  "Ã",  "Ã‘",  "Ã’",  "Ã“",  "Ã”",   "Ã–",  "Ã˜",  "Ã™","Ãœk", "Ãœ","â€š",    "ks",   "kS",   "k",  "h",    "q",   "w",   "`",    "s",    "S", "a",    "Â¡",    "%",     "W",  "â€¢", "Â·", "âˆ™", "Â·", "~j",  "~", "\\","+"," à¤ƒ","^", "*",  "Ãž", "ÃŸ", "(", "Â¼", "Â½", "Â¿", "Ã€", "Â¾", "A", "-", "&", "&", "Å’", "]","~ ","@");

var unicode_array = new Array("à¥°","QZ+","sa","a","à¤°à¥à¤¦à¥à¤§","Z","\"","\"","'","'", "à¥¦",  "à¥§",  "à¥¨",  "à¥©",     "à¥ª",   "à¥«",  "à¥¬",   "à¥­",   "à¥®",   "à¥¯",  "à¥žà¥",  "à¥˜",  "à¥™", "à¥™à¥",  "à¥š", "à¤œà¤¼à¥", "à¥›",  "à¥œ",  "à¥",   "à¥ž",  "à¥Ÿ",  "à¤±",  "à¤©",  "à¤¤à¥à¤¤", "à¤¤à¥à¤¤à¥", "à¤•à¥à¤¤",  "à¤¦à¥ƒ",  "à¤•à¥ƒ","à¤¨à¥à¤¨","à¤¨à¥à¤¨à¥","=k","f=", "à¤¹à¥à¤¨",  "à¤¹à¥à¤¯",  "à¤¹à¥ƒ",  "à¤¹à¥à¤®",  "à¤¹à¥à¤°",  "à¤¹à¥",   "à¤¦à¥à¤¦",  "à¤•à¥à¤·", "à¤•à¥à¤·à¥", "à¤¤à¥à¤°", "à¤¤à¥à¤°à¥",  "à¤›à¥à¤¯",  "à¤Ÿà¥à¤¯",  "à¤ à¥à¤¯",  "à¤¡à¥à¤¯",  "à¤¢à¥à¤¯", "à¤¦à¥à¤¯", "à¤œà¥à¤ž", "à¤¦à¥à¤µ", "à¤¶à¥à¤°",  "à¤Ÿà¥à¤°",    "à¤¡à¥à¤°",    "à¤¢à¥à¤°",    "à¤›à¥à¤°",   "à¤•à¥à¤°",  "à¤«à¥à¤°", "à¤°à¥à¤¦à¥à¤°",  "à¤¦à¥à¤°",   "à¤ªà¥à¤°", "à¤ªà¥à¤°",  "à¤—à¥à¤°", "à¤°à¥",  "à¤°à¥‚", "à¤‘",   "à¤“",  "à¤”",  "à¤†",   "à¤…", "à¤ˆà¤‚", "à¤ˆ",  "à¤ˆ",   "à¤‡",  "à¤‰",   "à¤Š",  "à¤",  "à¤", "à¤‹", "à¤•à¥à¤•", "à¤•", "à¤•", "à¤•à¥", "à¤–", "à¤–à¥", "à¤—", "à¤—", "à¤—à¥", "à¤˜", "à¤˜", "à¤˜à¥", "à¤™", "à¤šà¥ˆ",  "à¤š", "à¤š", "à¤šà¥", "à¤›", "à¤œ", "à¤œ", "à¤œà¥",  "à¤",  "à¤à¥", "à¤ž", "à¤Ÿà¥à¤Ÿ",   "à¤Ÿà¥à¤ ",   "à¤Ÿ",   "à¤ ",   "à¤¡à¥à¤¡",   "à¤¡à¥à¤¢",  "à¤¡à¤¼", "à¤¢à¤¼", "à¤¡",   "à¤¢", "à¤£", "à¤£à¥", "à¤¤", "à¤¤", "à¤¤à¥", "à¤¥", "à¤¥à¥",  "à¤¦à¥à¤§",  "à¤¦", "à¤§", "à¤§", "à¤§à¥", "à¤§à¥", "à¤§à¥", "à¤¨", "à¤¨", "à¤¨à¥",    "à¤ª", "à¤ª", "à¤ªà¥",  "à¤«", "à¤«à¥",  "à¤¬", "à¤¬", "à¤¬à¥",  "à¤­", "à¤­à¥",  "à¤®",  "à¤®", "à¤®à¥", "à¤¯", "à¤¯à¥",  "à¤°", "à¤²", "à¤²", "à¤²à¥",  "à¤³",  "à¤µ", "à¤µ", "à¤µà¥", "à¤¶", "à¤¶à¥",  "à¤·", "à¤·à¥", "à¤¸", "à¤¸", "à¤¸à¥", "à¤¹", "à¥€à¤‚", "à¥à¤°", "à¤¦à¥à¤¦", "à¤Ÿà¥à¤Ÿ","à¤Ÿà¥à¤ ","à¤¡à¥à¤¡","à¤•à¥ƒ","à¤­","à¥à¤¯","à¤¡à¥à¤¢","à¤à¥","à¤•à¥à¤°","à¤¤à¥à¤¤à¥","à¤¶","à¤¶à¥","à¥‰",  "à¥‹",   "à¥Œ",   "à¤¾",   "à¥€",   "à¥",   "à¥‚",   "à¥ƒ",   "à¥‡",   "à¥ˆ", "à¤‚",   "à¤",   "à¤ƒ",   "à¥…",  "à¤½", "à¤½", "à¤½", "à¤½", "à¥à¤°",  "à¥", "?", "à¤¼",":", "â€˜",   "â€™",   "â€œ",   "â€",  ";",  "(",    ")",   "{",    "}",   "=", "à¥¤", ".", "-",  "Âµ", "à¥°", ",","à¥ ","/");
function krutiunicode() {

  let fullText = document.getElementById("krutitext").value;
  let text_size = fullText.length;

  let processed_text = "";
  let n = 0, o = 0, r = 1;
  let max_text_size = 7000;

  while (r === 1) {
    n = o;

    if (o < (text_size - max_text_size)) {
      o += max_text_size;
      while (fullText.charAt(o) !== " ") { o--; }
    } else {
      o = text_size;
      r = 0;
    }

    let part = fullText.substring(n, o);
    processed_text += replsym(part);
  }

  document.getElementById("unicodetext").value =
    fixMojibake(processed_text);
}
function replsym(input) {

  let kruti_text = input;

  if (kruti_text !== "") {
    for (let input_symbol_idx = 0; input_symbol_idx < kruti_array.length; input_symbol_idx++) {
      while (kruti_text.indexOf(kruti_array[input_symbol_idx]) !== -1) {
        kruti_text = kruti_text.replace(
          kruti_array[input_symbol_idx],
          unicode_array[input_symbol_idx]
        );
      }
    }
  }

  kruti_text = kruti_text.replace(/Â±/g, "Zà¤‚");

  let pi = kruti_text.indexOf("f");
  while (pi !== -1) {
    let cni = kruti_text.charAt(pi + 1);
    kruti_text = kruti_text.replace("f" + cni, cni + "à¤¿");
    pi = kruti_text.indexOf("f", pi + 1);
  }

  pi = kruti_text.indexOf("fa");
  while (pi !== -1) {
    let cni = kruti_text.charAt(pi + 2);
    kruti_text = kruti_text.replace("fa" + cni, cni + "à¤¿à¤‚");
    pi = kruti_text.indexOf("fa", pi + 2);
  }

  let matras = "à¤¾à¤¿à¥€à¥à¥‚à¥ƒà¥‡à¥ˆà¥‹à¥Œà¤‚à¤à¤ƒ";
  let rpos = kruti_text.indexOf("Z");

  while (rpos > 0) {
    let p = rpos - 1;
    while (p >= 0 && matras.indexOf(kruti_text.charAt(p)) !== -1) {
      p--;
    }
    let cluster = kruti_text.substring(p + 1, rpos);
    kruti_text = kruti_text.replace(cluster + "Z", "à¤°à¥" + cluster);
    rpos = kruti_text.indexOf("Z");
  }

  return kruti_text;
}
function copyclipboard() {
   var copyText = document.querySelector("#unicodetext");
   copyText.select();
   copyText.setSelectionRange(0, 99999);
   document.execCommand("copy");
   alert("Text Copied To Clipboard.");
}
function cleartext() {
	document.getElementById("krutitext").value = '';
	document.getElementById("unicodetext").value = '';
}
function fixMojibake(str) {
  try {
    return decodeURIComponent(escape(str));
  } catch (e) {
    return str;
  }
}

